# tmux conf
#
# Prefix ,      -> Rename window
# Prefix $      -> Rename session
# Prefix w      -> Open session manager
# Prefix n,p    -> Hop between windows/tabs
# Prefix ()     -> Hop between sessions
# Prefix y      -> Enter copy mode
# Prefix M-1    -> Vertical Split all panes same width
# Prefix M-2    -> Horizontal Split, all panes same height
# Prefix M-3    -> Horizontal Split, main pane on top, all panes below same width
# Prefix M-4    -> Vertical Split, main pane left, all panes on the right same height
# Prefix M-5    -> Tile, new panes on bottom, same height before same width
# (copy mode) y -> Copy/End copy mode
# (copy mode) <Enter> -> Copy/End copy mode

# ---------------------
# -- Terminal Colors --
# ---------------------
# Also need in bashrc export TERM="xterm-256color"
# set-option -ga default-terminal "screen-256color"
set -g default-terminal "xterm-256color"
set -ga terminal-overrides ",*256col*:Tc"

# --------------
# -- Bindings --
# --------------
# Prefix
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Reload config
bind r source-file ~/.tmux.conf

# Vi-like Bindings
setw -g mode-keys vi

# Vi-like copy
unbind y
unbind p
unbind [
bind y copy-mode
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'xclip -in -selection clipboard'

# Vi-like paste
unbind p
bind p paste-buffer

# System Clipboard interaction
bind C-c run "tmux save-buffer - | xclip -i -sel clipboard"
bind C-v run "tmux set-buffer \"$(xclip -o -sel clipboard)\"; tmux paste-buffer"

# Mouse Scrolling
set -g mouse on

# Allows for faster key repetition
set -s escape-time 0

# Start window and pane numbering at 1, (0 is too hard to reach).
set -g base-index 1
set -g pane-base-index 1

# Kill Pane
unbind x
bind-key x kill-pane

# Set window split shortcuts
unbind '"'
unbind %
unbind v
unbind s
bind-key v split-window -h  # Vertical
bind-key s split-window     # Horizontal

# Switch panes using hjkl with Prefix
unbind h
unbind j
unbind k
unbind l

bind h select-pane -L
bind l select-pane -R
bind k select-pane -U
bind j select-pane -D

# Resize panes
unbind S-left
unbind S-down
unbind S-up
unbind S-right

bind -r -n S-down resize-pane -D    # (Resizes the current pane down)
bind -r -n S-up resize-pane -U      # (Resizes the current pane upward)
bind -r -n S-left resize-pane -L    # (Resizes the current pane left)
bind -r -n S-right resize-pane -R   # (Resizes the current pane right)

# Switching Tabs with no Prefix using Alt
unbind M-j
unbind M-k
bind -r -n M-j select-window -t :-
bind -r -n M-k select-window -t :+

# Swapping Windows within Sessions
unbind M-l
unbind M-h
bind -r -n M-l swap-window -t +1 \; next-window
bind -r -n M-h swap-window -t -1 \; previous-window

# Switching between Sessions
# unbind (
# unbind )
# unbind M-L
# unbind M-H
# bind -r -n M-L switch-client -n
# bind -r -n M-H switch-client -p

# Layout Changes
unbind o
unbind p
unbind M-o
unbind M-p
bind-key -r -n M-o swap-pane -U
bind-key -r -n M-p swap-pane -D

# Toggle Status Bar
unbind M-s
bind-key -n M-s set-option status

# Theming #
# Pane Borders
# dark blue
set-option -g pane-border-style fg='blue' # Not Active Border
# light blue
set-option -g pane-active-border-style fg='brightblue' # Active Border

# Copy Mode Highlighting
set-window-option -g mode-style bg='white',fg='black'

# Message text
# fg
set-option -g message-style 'fg=brightwhite'
set-option -g message-command-style 'fg=brightwhite'

# Status Bar #
# if doesnt work yet properly
# if-shell '[ -n $(tty | grep tty) ]' \
#     "LEFT_ICON=''; SEL_ICON=''" \
#     "LEFT_ICON='+'; SEL_ICON='>'"

LEFT_ICON='+'
SEL_ICON='>'

set -g status on
set -g status-interval 2
set -g status-justify "left"
set -g status-position bottom
set -g automatic-rename off

set -g status-style 'fg=green'

set-window-option -g window-status-format " #W "
# set-window-option -g window-status-current-format "#[bg=red,fg=cyan]$SEL_ICON#[bg=red,fg=black,bold]#W "
set-window-option -g window-status-current-format "#[bg=red,fg=black,bold] #W "
set-option -g window-status-current-style 'fg=red,bold'

set-option -g status-right ' [#S] '
set-option -g status-right-style 'fg=green'

set-option -g status-left "  $LEFT_ICON  "
set-option -g status-left-style 'bg=magenta,fg=black'
